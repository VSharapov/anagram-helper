<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <!--<meta http-equiv="refresh" content="5; URL=https://vas.im/anagram-helper/">-->
    <style type="text/css">
      @media (prefers-color-scheme: dark) {
        body {background-color: black; color: white;}
        a {filter: invert(1) brightness(0.5) invert(1);}
      }
    </style>
    <script src="https://cdn.rawgit.com/showdownjs/showdown/1.9.1/dist/showdown.min.js"></script>
    <script>
      var readme = 'README.md'
      var converter = new showdown.Converter();
      html      = converter.makeHtml('loading ' + 'asd' + ' ...');

      function reqListener () {
        html      = converter.makeHtml(this.responseText);
        document.getElementById('readme').innerHTML = html;
        document.title = document.getElementById('readme').children[0].innerHTML;
      }

      function updateAnagram() {
        phrase1 = document.getElementById('phrase1').value.toUpperCase().replace(/[^0-9a-z]/gi, '');
        phrase2 = document.getElementById('phrase2').value.toUpperCase().replace(/[^0-9a-z]/gi, '');
        map1 = []; map2 = [];
        for (i in phrase1) {
          map1.push({letter: phrase1[i], mappedTo: -1})
        }
        for (i in phrase2) {
          map2.push({letter: phrase2[i], mappedTo: -1})
        }
        for (i in map1) {
          if (map1[i]['mappedTo'] != -1) {continue;}
          for (j in map2) {
            if (map2[j]['mappedTo'] != -1) {continue;}
            if (map1[i]['letter'] == map2[j]['letter']) {
              map2[j]['mappedTo'] = i;
              map1[i]['mappedTo'] = j;
              console.log(i, map1[i], j, map2[j])
              break;
            }
          }
        }
        document.getElementById('in1butNot2').innerHTML = "";
        for (i in map1) {
          if (map1[i]['mappedTo'] == -1){
            document.getElementById('in1butNot2').innerHTML += map1[i]['letter'];
          }
        }
        document.getElementById('in2butNot1').innerHTML = "";
        for (i in map2) {
          if (map2[i]['mappedTo'] == -1){
            document.getElementById('in2butNot1').innerHTML += map2[i]['letter'];
          }
        }
      }

      function main() {
        var oReq = new XMLHttpRequest();
        oReq.addEventListener("load", reqListener);
        oReq.open("GET", readme);
        oReq.send();
        //
        updateAnagram();
      }
    </script>
	</head>
  <body onload="main()">
    <form oninput="updateAnagram()" onchange="updateAnagram()">
      <input id="phrase1" type="text" value="qwertyuiop" /><br />
      <h1 id="in1butNot2"></h1><br />
      <h1 id="in2butNot1"></h1><br />
      <input id="phrase2" type="text" value="typewriter" /><br />
    </form>
    <hr />
    <div id="readme"></div>
	</body>
</html>

